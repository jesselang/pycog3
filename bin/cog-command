#!/usr/bin/env python

import importlib
import os

bundle_name = os.getenv("COG_BUNDLE")
command_name = os.getenv("COG_COMMAND")

# `-` cannot be used in class names in python so
# since command_name is used directly for klass
# this doesn't break compatibility for existing bundles
# because if a bundle uses `-` in the command name
# pycog3 <= 0.1.27 throws exception
path = command_name.replace("-",".")
full_path = "%s.commands.%s" % (bundle_name, path)
class_name = command_name.split("-")[-1].capitalize()

bundle_module = importlib.import_module(full_path)
klass = getattr(bundle_module, class_name)
cmd = klass()
cmd.execute()
